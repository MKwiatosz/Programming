<!DOCTYPE html>
<!-- /////////////////////////////////////////////////////////////////////////////// -->
<!-- Więcej o setInterval: -->
<!-- https://developer.mozilla.org/en-US/docs/Web/API/window.setInterval -->
<!-- /////////////////////////////////////////////////////////////////////////////// -->

<html lang="pl">
	<head>
		<meta charset="utf-8">
		<title>Pierwsza animacja</title>
		<style>
			body{
				margin:0;
				padding: 0;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<script>
			var my_canvas = document.createElement('canvas');
			//ustawiamy szerokość i wysokość canvas
			my_canvas.width = 500;
			my_canvas.height = 500;
			// dodajemy canvas do elementu „body”
			document.body.appendChild(my_canvas);
			// Jeśli chcemy coś wyświetlić w elemencie canvas musimy skorzystać z obiektu „context 2D" (lub WebGL jeśli chcemy rysować elementy 3D)
			var ctx = my_canvas.getContext('2d');
			// 
			// pozycja x i y oraz wysokość kwadratu, który chcemy animować 
			var x = my_canvas.width/2; 
			var y = my_canvas.height/2;
			var h = 20;
			// fps przechowuje pożądaną ilość klatek na sekundę
			var fps = 60;

			// stara metoda animowania, sposób z następnego filmiku jest dużo wydajniejszy i przyjazny baterii
			// 
			setInterval(animationLoop, 1000/fps);
			function animationLoop(){
				// całkowite oczyszczenie canvas
				// ctx.clearRect(0,0,my_canvas.width, my_canvas.height);
				// jeśli chcemy, aby kwadrat pozostawał za sobą smugę trzeba czyścić go stopniowo
				ctx.fillStyle = 'rgba(255,255,255,0.2)';
				// zamalowanie całej canvas przezroczystą bielą
				ctx.fillRect(0,0,my_canvas.width, my_canvas.height);
				// powrot do czarnego koloru
				ctx.fillStyle = 'black';
				// zwiększenie pozycji x i y o 2 piksele
				x = x+2;
				y = y+2;
				// rysowanie kwadratu tak, aby środek znajdował się dokładnie w pozycji x, y
				ctx.fillRect(x-h/2 ,y-h/2, h, h);
			}
		</script>
	</body>
</html>